var util = require('util');
var SerialPort = require('serialport');
var Connection = require('./connection');

module.exports.Connection = Connection;

module.exports.list = function(callback) {
	SerialPort.list(function(error, devices) {
		if (error) {
			callback(error, devices);
			return;
		}
		var cubelets = [];
		devices.forEach(function(device) {
			if (device.comName && device.comName.indexOf('Cubelet') != -1) {
				cubelets.push(device);
			}
		});
		callback(null, cubelets);
	});
};